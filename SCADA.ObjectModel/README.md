## Device类开发规范

### Device为什么需要Monitor

1. 定时采样

   应用程序需要定时收集各种数据项的值。比如20:56:30.500收集一次数据，各个数据项的值必须立即获取到，如果每个数据项的当前值都需要一定时间(消息CT)才能读取到，那收集到的值，并不对应20:56:30.500这一时刻的值，而是延后的。所以采用Monitor实时缓存好Device的各项功能参数的值，采集时，直接从缓存中立即拿到值。

2. UI上Device控件实时显示Device的功能参数值

   ViewModel的定时器，定时从缓存中拿到值来刷新界面，简单快捷。如果是临时发起请求获取数据，需要调用Device的原生API，实现复杂，容易疏忽导致bug或者写出来的效率比较低。

3. Device的有些功能必须需要一个定时器才能实现，如气缸运动的超时机制。

4. Device的Monitor一直在运行，可以完成自监督机制，能够及时更早的发现以日志的形式暴出设备错误。

### Device为什么要把各个功能参数定义成类的属性

Monitor读到Device的功能参数值，赋值到属性，DataLogger内部字典存储的是返回属性值的委托。如果Monitor直接将读到的功能参数值直接赋值到DataLogger的字典内，这样大大增加了字典被访问的频率，发生锁阻塞的机率增加，可能成为程序的性能瓶颈。

定义的属性也可以直接参与Monitor函数的逻辑，比较方便，如Tolerance和Stable的的逻辑。

